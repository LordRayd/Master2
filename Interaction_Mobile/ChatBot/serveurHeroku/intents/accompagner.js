var bdd_bouteilles = {
    'Blanc': [
        {"nom": "Riesling tradition", "url": "https://vandb.fr/cave-du-roi-dagobert-riesling-tradition-blanc-2019.html", "saveurs": "Blanc-Frais et Croquant", "region": "Alsace", "origine": "France", "appellation": "Alsace", "domaine": "Cave du Roi Dagobert", "millesime": 2019, "contenance": 0.75, "prix": 8.5, "alcool": 13, "repas": [{"nom": "Viande blanche"},{"nom": "Fruits de mer"}, {"nom": "Crustacés"}, {"nom": "Poisson grillé"}]},
        {"nom": "Riesling tradition", "url": "https://vandb.fr/cave-du-roi-dagobert-riesling-tradition-blanc-2018.html", "saveurs": "Blanc-Frais et Croquant", "region": "Alsace", "origine": "France", "appellation": "Alsace", "domaine": "Cave du Roi Dagobert", "millesime": 2018, "contenance": 0.75, "prix": 8.5, "alcool": 12.5, "repas": [{"nom": "Viande blanche"},{"nom": "Fruits de mer"}, {"nom": "Crustacés"}, {"nom": "Poisson grillé"}]},
        {"nom": "Albarino Rias Baixas", "url": "https://vandb.fr/val-do-sosego-albarino-rias-baixas-blanc-2018.html", "saveurs": "Blanc-Frais et Croquant", "region": "Aucune", "origine": "Espagne", "appellation": "Espagne", "domaine": "Bodega Val Do Sosego", "millesime": 2018, "contenance": 0.75, "prix": 11.4, "alcool": 12.5, "repas": [{"nom": "Viande blanche"},{"nom": "Fruits de mer"},{"nom": "Poisson"},{"nom": "Fromages"}, {"nom": "Tapas"}]},
        {"nom": "Entre-Deux-Mers", "url": "https://vandb.fr/chateau-haut-meyreau-entre-deux-mers-2018.html", "saveurs": "Blanc-Frais et Croquant", "region": "Bordeaux", "origine": "France", "appellation": "Entre Deux Mers", "domaine": "Château Haut Meyreau", "millesime": 2018, "contenance": 0.75, "prix": 6.9, "alcool": 12.5, "repas": [{"nom": "Fruits de mer"}, {"nom": "Coquillages et crustacés"}, {"nom": "Poisson"}, {"nom": "Fromage de chèvre"}]},
        {"nom": "Petit Chablis", "url": "https://vandb.fr/agnes-gleizes-petit-chablis-2019.html", "saveurs": "Blanc-Frais et Croquant", "region": "Bourgogne", "origine": "France", "appellation": "Bourgogne", "domaine": "Cyril Gautheron", "millesime": 2019, "contenance": 0.75, "prix": 13.9, "alcool": 12.5, "repas": [{"nom": "Fruits de mer"}, {"nom": "Poisson"}, {"nom": "Fromages"}]},
        {"nom": "Pouilly Fuissé sur la Roche", "url": "https://vandb.fr/gilles-morat-pouilly-fuisse-sur-la-roche-2018-magnum.html", "saveurs": "Blanc-Elégant et Puissant", "region": "Bourgogne", "origine": "France", "appellation": "Pouilly Fuissé", "domaine": "Domaine Gilles Morat", "millesime": 2018, "contenance": 1.5, "prix": 70, "alcool": 13, "repas": [{"nom": "Fruits de mer"}, {"nom": "Coquillages et crustacés"}, {"nom": "Poisson"}]},
        {"nom": "Demoiselles Tatin", "url": "https://vandb.fr/demoiselles-tatin-reuilly-blanc-2018.html", "saveurs": "Blanc-Frais et Croquant", "region": "Loire", "origine": "France", "appellation": "Reuilly", "domaine": "Domaine Tatin", "millesime": 2018, "contenance": 0.75, "prix": 12.5, "alcool": 12.5, "repas": [{"nom": "Viande blanche"}, {"nom": "Crustacés"}, {"nom": "Fruits de mer"}, {"nom": "Coquillages et crustacés"}, {"nom": "Poisson"}, {"nom": "Poisson grillé"}]},
        {"nom": "Le Voyage Extraordinaire", "url": "https://vandb.fr/famille-lieubeau-le-voyage-extraordinaire-blanc-2019.html", "saveurs": "Blanc-Frais et Croquant", "region": "Loire", "origine": "France", "appellation": "Muscadet sur Lie", "domaine": "Famille Lieubeau", "millesime": 2019, "contenance": 0.75, "prix": 8, "alcool": 12, "repas": [{"nom": "Coquillages et crustacés"}, {"nom": "Fromage de chèvre"}, {"nom": "Fromage doux"}, {"nom": "Fromage frais"}]}
    ],
    'Rouge': [
        {"nom": "Château Bellevue Malartic", "url": "https://vandb.fr/chateau-bellevue-malartic-bordeaux-rouge-2017.html", "saveurs": "Rouge-Rond et souple", "region": "Bordeaux", "origine": "France" , "appellation": "Bordeaux", "domaine": "Vignobles Invindia", "millesime": 2017, "contenance": 0.75, "prix": 11.5, "alcool": 14.5, "repas": [{"nom": "Barbecue"}, {"nom": "Burger"}, {"nom": "Viande rouge"}, {"nom": "Ribs"}, {"nom": "Gibier"}]},
        {"nom": "La Tyre", "url": "https://vandb.fr/chateau-montus-la-tyre-2006.html", "saveurs": "Rouge-Corsé et Boisé", "region": "Sud Ouest", "origine": "France", "appellation": "Madiran", "domaine": "Vignobles Brumont", "millesime": 2006, "contenance": 0.75, "prix": 120, "alcool": 17, "repas": [{"nom": "Viande rouge"}, {"nom": "Gibier"}, {"nom": "Agneau"}]},
        {"nom": "Les Entrecoeurs", "url": "https://vandb.fr/domaine-mucyn-les-entrecoeurs-crozes-hermitage-rouge-2018.html", "saveurs": "Rouge-Charnu et relevé", "region": "Côte du Rhône", "origine": "France", "appellation": "Crozes Hermitage", "domaine": "Domaine Mucyn", "millesime": 2018, "contenance": 0.75, "prix": 18.7, "alcool": 13, "repas": [{"nom": "Viande rouge"}, {"nom": "Agneau"}, {"nom": "Plats épicés"}]},
        {"nom": "Les Salamandres", "url": "https://vandb.fr/domaine-mucyn-les-salamandres-saint-joseph-rouge-2017.html", "saveurs": "Rouge-Charnu et relevé", "region": "Côte du Rhône", "origine": "France", "appellation": "Saint Joseph", "domaine": "Domaine Mucyn", "millesime": 2017, "contenance": 0.75, "prix": 22.8, "alcool": 13, "repas": [{"nom": "Viande rouge"}, {"nom": "Gibier"}, {"nom": "Charcuterie"}]},
        {"nom": "Malbec", "url": "https://vandb.fr/ensedune-coteaux-enserune-malbec-2018.html", "saveurs": "Rouge-Rond et souple", "region": "Languedoc", "origine": "France", "appellation": "Coteaux d'Ensérune", "domaine": "Les Vignobles Foncalieu", "millesime": 2018, "contenance": 0.75, "prix": 6.1, "alcool": 13.5, "repas": [{"nom": "Viande rouge"}, {"nom": "Gibier"}, {"nom": "Burger"}, {"nom": "Ribs"}, {"nom": "Barbecue"}]},
        {"nom": "Le Carignan", "url": "https://vandb.fr/domaine-de-familongue-le-carignan-de-familongue-rouge-2019.html", "saveurs": "Rouge-Rond et souple", "region": "Languedoc", "origine": "France", "appellation": "Mont Baudile", "domaine": "Domaine de Familongue", "millesime": 2019, "contenance": 0.75, "prix": 7.1, "alcool": 13, "repas": [{"nom": "Viande rouge"}, {"nom": "Ribs"}, {"nom": "Barbecue"}]}
    ],
    'Rosé': [
        {"nom": "Madame d'Arsilemont", "url": "https://vandb.fr/madame-d-arsilemont-rose-2019.html", "saveurs": "Rosé-Friand", "region": "Bordeaux", "origine": "France", "appellation": "Bordeaux", "domaine": "Vignobles Invindia", "millesime": 2019, "contenance": 0.75, "prix": 7, "alcool": 13, "repas": [{"nom": "Tapas"}, {"nom": "Salade de saison"}, {"nom": "Dessert fruité"}]},
        {"nom": "Bandol", "url": "https://vandb.fr/vignobles-gueissard-bandol-rose-2019.html", "saveurs": "Rosé-Riche et puissant", "region": "Provence", "origine": "France", "appellation": "Bandol", "domaine": "Vignobles Gueissard", "millesime": 2019, "contenance": 0.75, "prix": 15.2, "alcool": 13, "repas": [{"nom": "Tapas"}, {"nom": "Tarte sucrée"}, {"nom": "Charcuterie"}, {"nom": "Poisson grillé"}, {"nom": "Viande blanche"}]},
        {"nom": "Zanzibar", "url": "https://vandb.fr/moulin-de-lene-zanzibar-rose-2019.html", "saveurs": "Rosé-Friand", "region": "Languedoc", "origine": "France", "appellation": "Côtes de Thongue", "domaine": "Domaine Moulin de Lène", "millesime": 2019, "contenance": 0.75, "prix": 6.9, "alcool": 12.5, "repas": [{"nom": "Viande blanche"}, {"nom": "Barbecue"}]},
        {"nom": "Lez'Arts", "url": "https://vandb.fr/vignobles-marrenon-lez-arts-rose-2019.html", "saveurs": "Rosé-Friand", "region": "Côte du Rhône", "origine": "France", "appellation": "Méditerranée", "domaine": "Marrenon", "millesime": 2019, "contenance": 0.75, "prix": 6.6, "alcool": 12.5, "repas": [{"nom": "Barbecue"}, {"nom": "Salade de saison"}]}

    ]
};


function accompagner(agent) {
    let texte_ret = 'Vous souhaitez accompagner un que je ne connait pas';

    if (agent.parameters.Plat) {
        texte_ret = 'Aucune bouteille n\'est particulièrement conseiller avec : ' + agent.parameters.Plat;
        let list_possible_bouteille = [];
        for (let list_couleur in bdd_bouteilles) {
            bdd_bouteilles[list_couleur].forEach( (item) => {
                item.repas.forEach((plat) => {
                    if(plat.nom === agent.parameters.Plat) list_possible_bouteille.push(item);
                });
            });
        }
        if (list_possible_bouteille.length > 0) {
            let indice = Math.floor(Math.random() * Math.floor(list_possible_bouteille.length));
            let bouteille_choisi = list_possible_bouteille[indice];
            texte_ret = 'Pour accompagner le plat ' + agent.parameters.Plat + '.<br />';
            texte_ret += 'Je vous conseille le ' + bouteille_choisi.nom + ".<br />";
            texte_ret += 'Du domaine : ' + bouteille_choisi.domaine + ".<br />";
            texte_ret += 'Plus d\'informations <a href="' + bouteille_choisi.url + '">ici<a>';
        }
    }
    agent.add(texte_ret);
}

module.exports = {
    accompagner: accompagner
};